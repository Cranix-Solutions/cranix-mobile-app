<cranix-toolbar title="{{'Manage hwconfs' | translate}}"></cranix-toolbar>
<ion-row class="header-row">
  <ion-col>
    <ion-title>
    @if(!authService.isMD()){
    {{ 'Modify selected hwconf' | translate}}:
    }
    "{{object.name}}" {{object.deviceType | translate }} {{object.description}}
    </ion-title>
  </ion-col>
</ion-row>
@if(editForm){
<ion-content>
  <form [formGroup]="editForm" (ngSubmit)="onSubmit(editForm.value)">
    <ion-card>
      <ion-card-header>
        @if(authService.isMD()){
        <ion-list>
          <ion-item lines="none" style="background-color : {{authService.rowColors[0]}}">
            <ion-label [position]="authService.settings.labelPlacement">{{ 'id' | translate }}</ion-label>
            <ion-input color="tertiary" type="text" formControlName="id" value="{{object.id}}" readonly>
            </ion-input>
            <ion-buttons slot="end">
              <ion-button size="small" type="submit" [disabled]="!editForm.valid"
                matTooltip="{{'Apply changes' | translate }}">
                <ion-icon color="success" slot="icon-only" name="checkmark-sharp"></ion-icon>
              </ion-button>
              <ion-button size="small" (click)="cleanUp($event)" matTooltip="{{'Remove arhived images' | translate }}">
                <ion-icon slot="icon-only" name="remove-circle"></ion-icon>
              </ion-button>
              <ion-button size="small" (click)="delete($event)" matTooltip="{{'Delete hwconf' | translate }}">
                <ion-icon slot="icon-only" color="danger" name="trash"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-item>
          <ion-item lines="none" style="background-color : {{authService.rowColors[1]}}">
            <ion-label [position]="authService.settings.labelPlacement">{{ 'name' | translate }}*</ion-label>
            <ion-input type="text" formControlName="name" value="{{object.name}}" required>
            </ion-input>
          </ion-item>
          <ion-item lines="none" style="background-color : {{authService.rowColors[0]}}">
            <ion-label [position]="authService.settings.labelPlacement">{{ 'description' | translate }}*</ion-label>
            <ion-input type="text" formControlName="description" value="{{object.description}}" required>
            </ion-input>
          </ion-item>
          <ion-item lines="none" style="background-color : {{authService.rowColors[1]}}">
            <ion-select type="text" formControlName="deviceType" [compareWith]="objectService.compareFn" required>
              <div slot="label">{{ 'deviceType' | translate }}*</div>
              <ion-select-option *ngFor="let option of  objectService.selects['deviceType']" value="{{option}}">
                {{option | translate}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-list>
      }
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          @if(!authService.isMD()){
          <ion-row  style="background-color : {{authService.rowColors[2]}}">
            <ion-col size="2">
              <ion-item>
                <ion-label [position]="authService.settings.labelPlacement">{{ 'id' | translate }}</ion-label>
                <ion-input color="tertiary" type="text" formControlName="id" value="{{object.id}}" readonly>
                </ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item>
                <ion-label [position]="authService.settings.labelPlacement">{{ 'name' | translate }}*</ion-label>
                <ion-input type="text" formControlName="name" value="{{object.name}}" required>
                </ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="3">
              <ion-item>
                <ion-label [position]="authService.settings.labelPlacement">{{ 'description' | translate }}*</ion-label>
                <ion-input type="text" formControlName="description" value="{{object.description}}" required>
                </ion-input>
              </ion-item>
            </ion-col>
            <ion-col size="2">
              <ion-item>
                <ion-select type="text" formControlName="deviceType" [compareWith]="objectService.compareFn" required>
                  <div slot="label">{{ 'deviceType' | translate }}*</div>
                  <ion-select-option *ngFor="let option of  objectService.selects['deviceType']" value="{{option}}">
                    {{option | translate}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
            <ion-col size="2">
              <ion-buttons>
                <ion-button size="small" type="submit" [disabled]="!editForm.valid"
                  matTooltip="{{'Apply changes' | translate }}">
                  <ion-icon color="success" slot="icon-only" name="checkmark-sharp"></ion-icon>
                </ion-button>
                <ion-button size="small" (click)="cleanUp($event)" matTooltip="{{'Remove arhived images' | translate }}">
                  <ion-icon slot="icon-only" name="remove-circle"></ion-icon>
                </ion-button>
                <ion-button size="small" (click)="delete($event)" matTooltip="{{'Delete hwconf' | translate }}">
                  <ion-icon slot="icon-only" color="danger" name="trash"></ion-icon>
                </ion-button>
              </ion-buttons>
            </ion-col>
          </ion-row>
          }
            <ion-row>
            <ion-col>
              <ion-item size=12 sizeMd=3 sizeLg=3 sizeXl=3>
                <h1>{{ 'Partitions' | translate}}:</h1>
              </ion-item>
            </ion-col>
          </ion-row>
          @if(!authService.isMD()){
          <ion-row style="background-color : {{authService.rowColors[2]}}">
            <ion-col size=2>
              <ion-item lines="none">
                <ion-label>{{ 'name' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=1>
              <ion-item lines="none">
                <ion-label>{{ 'delete' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=2>
              <ion-item lines="none">
                <ion-label>{{ 'description' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=2>
              <ion-item lines="none">
                <ion-label>{{ 'OS' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=1>
              <ion-item lines="none">
                <ion-label>{{ 'joinType' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=2>
              <ion-item lines="none">
                <ion-label>{{ 'cloneTool' | translate}}</ion-label>
              </ion-item>
            </ion-col>
            <ion-col size=2>
              <ion-item lines="none">
                <ion-label>{{ 'lastCloned' | translate}}</ion-label>
              </ion-item>
            </ion-col>
          </ion-row>
          }
          <ion-row *ngFor="let part of object.partitions; index as i"
            style="background-color : {{authService.rowColors[i%2]}}">
            <ion-col size=11 sizeMd=2 sizeLg=2 sizeXl=2>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                @if(authService.isMD()){<ion-label position="fixed">{{ 'name' |
                  translate}}</ion-label>}
                <ion-input type="text" formControlName="part-{{part.id}}-name" value="{{part.name}}"></ion-input>
              </ion-item>
            </ion-col>
            <ion-col size=1>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                <ion-button fill="clear" (click)="deletePartition(part.name)"
                  matTooltip="{{'Delete partition' | translate }}">
                  <ion-icon slot="icon-only" color="danger" name="trash"></ion-icon>
                </ion-button>
              </ion-item>
            </ion-col>
            <ion-col size=12 sizeMd=2 sizeLg=2 sizeXl=2>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                @if(authService.isMD()){<ion-label position="fixed">{{ 'description' |
                  translate}}</ion-label>}
                <ion-input type="text" formControlName="part-{{part.id}}-description" value="{{part.description}}">
                </ion-input>
              </ion-item>
            </ion-col>
            <ion-col size=12 sizeMd=2 sizeLg=2 sizeXl=2>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                <ion-select type="text" formControlName="part-{{part.id}}-os" [compareWith]="objectService.compareFn">
                  @if(authService.isMD()){<div slot="label">{{ 'OS' | translate}}</div>}
                  <ion-select-option *ngFor="let os of  operatingSystems" value="{{os}}">{{os}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
            <ion-col size=12 sizeMd=1 sizeLg=1 sizeXl=1>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                <ion-select type="text" formControlName="part-{{part.id}}-joinType"
                  [compareWith]="objectService.compareFn">
                  @if(authService.isMD()){<div slot="label">{{ 'joinType' | translate}}</div>}
                  <ion-select-option *ngFor="let join of  joinTypes" value="{{join}}">{{join}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
            <ion-col size=12 sizeMd=2 sizeLg=2 sizeXl=2>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                <ion-select type="text" formControlName="part-{{part.id}}-tool" [compareWith]="objectService.compareFn">
                  @if(authService.isMD()){<div slot="label">{{ 'cloneTool' | translate}}</div>}
                  <ion-select-option *ngFor="let tool of  tools" value="{{tool}}">{{tool}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
            <ion-col size=12 sizeMd=2 sizeLg=2 sizeXl=2>
              <ion-item [lines]="authService.isMD() ? 'full' : 'none'">
                @if(authService.isMD()){<ion-label position="fixed">{{ 'lastCloned' |
                  translate}}</ion-label>}
                <ion-input type="text" value="{{part.lastCloned | date:'yyyy-MM-dd HH:mm:ss Z' }}" readonly>
                </ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </form>
</ion-content>
}
